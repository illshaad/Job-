{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gramos/Desktop/Job-/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gramos/Desktop/Job-/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from\"react\";import{Container,Image,Segment}from\"semantic-ui-react\";import GoogleLogin from\"react-google-login\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";export default function Google(_ref){var setDataFromAPI=_ref.setDataFromAPI;var history=useHistory();//Envoie de la donnée au back//\n// Utilisation du localStorage pour sauvergarder email apres le click du button google//\nvar responseGoogle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var emailResponse,nomPrenom;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.rt.$t;case 2:emailResponse=_context.sent;_context.next=5;return axios.post(\"https://gsuite-api-dot-projet-test-doctegestio.uc.r.appspot.com/getGsuiteUser\",{email:emailResponse}).then(function(res){setDataFromAPI(res.data);});case 5:_context.next=7;return emailResponse.split(\"@\")[0].replace(\".\",\"/\");case 7:nomPrenom=_context.sent;localStorage.setItem(\"name\",emailResponse);_context.next=11;return axios.post(\"http://localhost:3000/gestionPerso\",{email:localStorage.getItem(\"name\")}).then(function(response){{history.push(\"/collaborateur/\".concat(nomPrenom));}});case 11:case\"end\":return _context.stop();}}},_callee);}));return function responseGoogle(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Image,{style:{marginTop:100},src:\"./Doctegestio.png\",size:\"medium\",centered:\"true\"}),/*#__PURE__*/React.createElement(Image,{src:\"./pcDocte.png\",style:{marginTop:30},size:\"small\",centered:\"true\"}),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Segment,{style:{marginTop:30}},/*#__PURE__*/React.createElement(\"p\",{style:{textAlign:\"center\"}},\"Nous avons besoin de vous authentifier pour vous donner l'acc\\xE8s \\xE0 l'application.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"google\"},/*#__PURE__*/React.createElement(GoogleLogin,{icon:\"false\",clientId:\"939765445894-gkfl9fd7gpd2vehkhdp1ju8g7760p2ca.apps.googleusercontent.com\",render:function render(renderProps){return/*#__PURE__*/React.createElement(\"button\",{onClick:renderProps.onClick,disabled:renderProps.disabled},\"Se connecter avec Doctegestio\");},buttonText:\"Login\",onSuccess:responseGoogle,onFailure:responseGoogle,cookiePolicy:\"single_host_origin\"})))));}","map":{"version":3,"sources":["/Users/gramos/Desktop/Job-/client/src/components/googleLogin.js"],"names":["React","useState","Container","Image","Segment","GoogleLogin","useHistory","axios","Google","setDataFromAPI","history","responseGoogle","response","rt","$t","emailResponse","post","email","then","res","data","split","replace","nomPrenom","localStorage","setItem","getItem","push","marginTop","textAlign","renderProps","onClick","disabled"],"mappings":"6SAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,CAAoBC,KAApB,CAA2BC,OAA3B,KAA0C,mBAA1C,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,cAAe,SAASC,CAAAA,MAAT,MAAoC,IAAlBC,CAAAA,cAAkB,MAAlBA,cAAkB,CACjD,GAAIC,CAAAA,OAAO,CAAGJ,UAAU,EAAxB,CACA;AACA;AACA,GAAMK,CAAAA,cAAc,2FAAG,iBAAOC,QAAP,oKACOA,CAAAA,QAAQ,CAACC,EAAT,CAAYC,EADnB,QACfC,aADe,qCAGfR,CAAAA,KAAK,CACRS,IADG,CAEF,+EAFE,CAGF,CAAEC,KAAK,CAAEF,aAAT,CAHE,EAKHG,IALG,CAKE,SAACC,GAAD,CAAS,CACbV,cAAc,CAACU,GAAG,CAACC,IAAL,CAAd,CACD,CAPG,CAHe,8BAYGL,CAAAA,aAAa,CAACM,KAAd,CAAoB,GAApB,EAAyB,CAAzB,EAA4BC,OAA5B,CAAoC,GAApC,CAAyC,GAAzC,CAZH,QAYfC,SAZe,eAarBC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BV,aAA7B,EAbqB,uBAcfR,CAAAA,KAAK,CACRS,IADG,CACE,oCADF,CACwC,CAC1CC,KAAK,CAAEO,YAAY,CAACE,OAAb,CAAqB,MAArB,CADmC,CADxC,EAIHR,IAJG,CAIE,SAACN,QAAD,CAAc,CAClB,CACEF,OAAO,CAACiB,IAAR,0BAA+BJ,SAA/B,GACD,CACF,CARG,CAde,wDAAH,kBAAdZ,CAAAA,cAAc,6CAApB,CAwBA,mBACE,4CACE,oBAAC,KAAD,EACE,KAAK,CAAE,CAAEiB,SAAS,CAAE,GAAb,CADT,CAEE,GAAG,CAAC,mBAFN,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAC,MAJX,EADF,cAOE,oBAAC,KAAD,EACE,GAAG,CAAC,eADN,CAEE,KAAK,CAAE,CAAEA,SAAS,CAAE,EAAb,CAFT,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAC,MAJX,EAPF,cAaE,oBAAC,SAAD,mBACE,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAEA,SAAS,CAAE,EAAb,CAAhB,eACE,yBAAG,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAV,2FADF,cAKE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,WAAD,EACE,IAAI,CAAC,OADP,CAEE,QAAQ,CAAC,0EAFX,CAGE,MAAM,CAAE,gBAACC,WAAD,qBACN,8BACE,OAAO,CAAEA,WAAW,CAACC,OADvB,CAEE,QAAQ,CAAED,WAAW,CAACE,QAFxB,kCADM,EAHV,CAWE,UAAU,CAAC,OAXb,CAYE,SAAS,CAAErB,cAZb,CAaE,SAAS,CAAEA,cAbb,CAcE,YAAY,CAAE,oBAdhB,EADF,CALF,CADF,CAbF,CADF,CA0CD","sourcesContent":["import React, { useState } from \"react\";\nimport { Container, Image, Segment } from \"semantic-ui-react\";\nimport GoogleLogin from \"react-google-login\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport default function Google({ setDataFromAPI }) {\n  let history = useHistory();\n  //Envoie de la donnée au back//\n  // Utilisation du localStorage pour sauvergarder email apres le click du button google//\n  const responseGoogle = async (response) => {\n    const emailResponse = await response.rt.$t;\n    //envoie EMAIL RESPONSE  A DIMITRI//\n    await axios\n      .post(\n        \"https://gsuite-api-dot-projet-test-doctegestio.uc.r.appspot.com/getGsuiteUser\",\n        { email: emailResponse }\n      )\n      .then((res) => {\n        setDataFromAPI(res.data);\n      });\n\n    const nomPrenom = await emailResponse.split(\"@\")[0].replace(\".\", \"/\");\n    localStorage.setItem(\"name\", emailResponse);\n    await axios\n      .post(\"http://localhost:3000/gestionPerso\", {\n        email: localStorage.getItem(\"name\"),\n      })\n      .then((response) => {\n        {\n          history.push(`/collaborateur/${nomPrenom}`);\n        }\n      });\n  };\n  return (\n    <div>\n      <Image\n        style={{ marginTop: 100 }}\n        src=\"./Doctegestio.png\"\n        size=\"medium\"\n        centered=\"true\"\n      />\n      <Image\n        src=\"./pcDocte.png\"\n        style={{ marginTop: 30 }}\n        size=\"small\"\n        centered=\"true\"\n      />\n      <Container>\n        <Segment style={{ marginTop: 30 }}>\n          <p style={{ textAlign: \"center\" }}>\n            Nous avons besoin de vous authentifier pour vous donner l'accès à\n            l'application.\n          </p>\n          <div className=\"google\">\n            <GoogleLogin\n              icon=\"false\"\n              clientId=\"939765445894-gkfl9fd7gpd2vehkhdp1ju8g7760p2ca.apps.googleusercontent.com\"\n              render={(renderProps) => (\n                <button\n                  onClick={renderProps.onClick}\n                  disabled={renderProps.disabled}\n                >\n                  Se connecter avec Doctegestio\n                </button>\n              )}\n              buttonText=\"Login\"\n              onSuccess={responseGoogle}\n              onFailure={responseGoogle}\n              cookiePolicy={\"single_host_origin\"}\n            />\n          </div>\n        </Segment>\n      </Container>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}