{"ast":null,"code":"var _jsxFileName = \"/Users/shadd/Desktop/jobdoctegestio/client/src/components/googleLogin.js\";\nimport React, { useState } from 'react';\nimport { Container, Image, Segment } from 'semantic-ui-react';\nimport GoogleLogin from 'react-google-login';\nimport { useHistory } from \"react-router-dom\";\nimport axios from 'axios';\nexport default function Google() {\n  const [dataFromAPI, setDataFromAPI] = useState({});\n  let history = useHistory(); //Envoie de la donnée au back//\n  // Utilisation du localStorage pour sauvergarder email apres le click du button google//\n\n  const responseGoogle = async response => {\n    console.log(response, 'GOOGLE');\n    const emailResponse = await response.rt.$t;\n    console.log(emailResponse, ' Email '); //envoie EMAIL RESPONSE  A DIMITRI//\n\n    await axios.post(\"https://gsuite-api-dot-projet-test-doctegestio.uc.r.appspot.com/getGsuiteUser\", {\n      email: emailResponse\n    }).then(res => {\n      console.log(res, 'API DIMITRI');\n      setDataFromAPI(res.data);\n    });\n    console.log(dataFromAPI, ' API SERVICE');\n    const nomPrenom = await emailResponse.split(\"@\")[0].replace(\".\", \"/\");\n    localStorage.setItem('name', emailResponse);\n    await axios.post(\"http://localhost:3000/gestionPerso\", {\n      email: localStorage.getItem(\"name\")\n    }).then(response => {\n      console.log(response, ' TRUE');\n      {\n        response.data.isCollabo ? history.push(`/rh`) : history.push(`/collaborateur/${nomPrenom}`);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    style: {\n      marginTop: 100\n    },\n    src: \"./Doctegestio.png\",\n    size: \"medium\",\n    centered: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Image, {\n    src: \"./pcDocte.png\",\n    style: {\n      marginTop: 30\n    },\n    size: \"small\",\n    centered: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Segment, {\n    style: {\n      marginTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 21\n    }\n  }, \"Nous avons besoin de vous authentifier pour vous donner l'acc\\xE8s \\xE0 l'application.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"google\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(GoogleLogin, {\n    icon: \"false\",\n    clientId: \"939765445894-gkfl9fd7gpd2vehkhdp1ju8g7760p2ca.apps.googleusercontent.com\",\n    render: renderProps => /*#__PURE__*/React.createElement(\"button\", {\n      onClick: renderProps.onClick,\n      disabled: renderProps.disabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 33\n      }\n    }, \"Se connecter avec Doctegestio\"),\n    buttonText: \"Login\",\n    onSuccess: responseGoogle,\n    onFailure: responseGoogle,\n    cookiePolicy: 'single_host_origin',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 25\n    }\n  })))));\n}","map":{"version":3,"sources":["/Users/shadd/Desktop/jobdoctegestio/client/src/components/googleLogin.js"],"names":["React","useState","Container","Image","Segment","GoogleLogin","useHistory","axios","Google","dataFromAPI","setDataFromAPI","history","responseGoogle","response","console","log","emailResponse","rt","$t","post","email","then","res","data","nomPrenom","split","replace","localStorage","setItem","getItem","isCollabo","push","marginTop","textAlign","renderProps","onClick","disabled"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Container, Image, Segment } from 'semantic-ui-react'\nimport GoogleLogin from 'react-google-login'\nimport { useHistory } from \"react-router-dom\";\nimport axios from 'axios';\n\n\nexport default function Google() {\n\n    const [dataFromAPI, setDataFromAPI] = useState({})\n\n    let history = useHistory();\n    //Envoie de la donnée au back//\n    // Utilisation du localStorage pour sauvergarder email apres le click du button google//\n    const responseGoogle = async (response) => {\n        console.log(response, 'GOOGLE');\n\n        const emailResponse = await response.rt.$t;\n        console.log(emailResponse, ' Email ');\n        //envoie EMAIL RESPONSE  A DIMITRI//\n        await axios.post(\"https://gsuite-api-dot-projet-test-doctegestio.uc.r.appspot.com/getGsuiteUser\", { email: emailResponse })\n            .then(res => {\n                console.log(res, 'API DIMITRI');\n                setDataFromAPI(res.data)\n            })\n        console.log(dataFromAPI, ' API SERVICE');\n\n        const nomPrenom = await emailResponse.split(\"@\")[0].replace(\".\", \"/\")\n        localStorage.setItem('name', emailResponse)\n        await axios.post(\"http://localhost:3000/gestionPerso\", { email: localStorage.getItem(\"name\") })\n            .then(response => {\n                console.log(response, ' TRUE');\n\n                { response.data.isCollabo ? history.push(`/rh`) : history.push(`/collaborateur/${nomPrenom}`) }\n            })\n    }\n\n    return (\n        <div>\n            <Image style={{ marginTop: 100 }} src='./Doctegestio.png' size='medium' centered='true' />\n            <Image src='./pcDocte.png' style={{ marginTop: 30 }} size='small' centered='true' />\n            <Container>\n                <Segment style={{ marginTop: 30 }}>\n                    <p style={{ textAlign: 'center' }}>Nous avons besoin de vous authentifier pour vous donner l'accès à l'application.</p>\n                    <div className='google'>\n                        <GoogleLogin icon='false'\n                            clientId=\"939765445894-gkfl9fd7gpd2vehkhdp1ju8g7760p2ca.apps.googleusercontent.com\"\n                            render={renderProps => (\n                                <button onClick={renderProps.onClick} disabled={renderProps.disabled}>Se connecter avec Doctegestio</button>\n                            )}\n                            buttonText=\"Login\"\n                            onSuccess={responseGoogle}\n                            onFailure={responseGoogle}\n                            cookiePolicy={'single_host_origin'}\n                        />\n                    </div>\n                </Segment>\n            </Container>\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}